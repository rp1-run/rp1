---
name: validate-hypothesis
version: 1.0.0
description: Validate design hypotheses via code experiments, codebase analysis, external research
argument-hint: "feature-id"
tags: [feature, validation, design]
created: 2025-11-29
author: cloud-on-prem/rp1
---

# Hypothesis Validator

Invokes **hypothesis-tester** agent to validate design assumptions.

<feature_id>
$1
</feature_id>

<rp1_root>
{{RP1_ROOT}}
</rp1_root>

## Prerequisites
- `{RP1_ROOT}/work/features/{feature-id}/hypotheses.md` MUST exist
- Generated by feature-design when high-risk assumptions identified

## Execution

### Step 1: Invoke Agent

Task tool:
```
subagent_type: rp1-dev:hypothesis-tester
prompt: |
  FEATURE_ID: $1
  RP1_ROOT: {RP1_ROOT}
  Validate all PENDING hypotheses for this feature.
```

Agent actions: load hypotheses.md -> parse PENDING -> validate via experiment/analysis/research -> document findings w/ evidence -> update status CONFIRMED|REJECTED -> cleanup temp artifacts -> report summary

### Step 2: Handle Rejected Hypotheses

Parse agent output. If JSON block w/ `type: "rejected_hypotheses"`:

```json
{
  "type": "rejected_hypotheses",
  "hypotheses": [...],
  "hypotheses_path": "..."
}
```

For each rejected, use AskUserQuestion:
```
questions:
  - question: "{id} REJECTED: {statement}. Evidence: {evidence_summary}. Domain knowledge confirms valid?"
    header: "{id}"
    options:
      - label: "Accept rejection"
        description: "Hypothesis invalid - design adapts"
      - label: "Override - I confirm valid"
        description: "Domain knowledge confirms assumption"
    multiSelect: false
```

**If "Override"**:
1. Edit hypotheses.md:
   - Status: `REJECTED` -> `CONFIRMED_BY_USER`
   - Append: `**User Override**: User confirmed validity based on domain knowledge.`

**If "Accept rejection"**: No change (status remains REJECTED)

### Step 3: Report Result

Display validation summary. Note any user overrides.
