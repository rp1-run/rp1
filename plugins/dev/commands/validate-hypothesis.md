---
name: validate-hypothesis
version: 1.0.0
description: Validate design hypotheses for a feature through code experiments, codebase analysis, and external research
argument-hint: "feature-id"
tags:
  - feature
  - validation
  - design
created: 2025-11-29
author: cloud-on-prem/rp1
---

# Hypothesis Validator

This command invokes the **hypothesis-tester** agent to validate design assumptions for a feature.

<feature_id>
$1
</feature_id>

<rp1_root>
{{RP1_ROOT}}
</rp1_root>

**Prerequisites**:
- A `hypotheses.md` file must exist at `{RP1_ROOT}/work/features/{feature-id}/hypotheses.md`
- This file is typically generated by the feature-design command when high-risk assumptions are identified

**Usage**:
```
/rp1-dev:validate-hypothesis my-feature
```

## Execution

### Step 1: Invoke Hypothesis Tester

Use the Task tool to invoke the hypothesis-tester agent:

```
subagent_type: rp1-dev:hypothesis-tester
prompt: |
  FEATURE_ID: $1
  RP1_ROOT: {RP1_ROOT}

  Validate all PENDING hypotheses for this feature.
```

The agent will:
- Load the hypotheses.md document for the specified feature
- Parse all PENDING hypotheses
- Validate each using code experiments, codebase analysis, or external research
- Document findings with evidence and implications
- Update hypothesis status to CONFIRMED or REJECTED
- Clean up any temporary artifacts
- Report validation summary

### Step 2: Handle Rejected Hypotheses

Parse the agent's output. If it includes a JSON block with `type: "rejected_hypotheses"`:

```json
{
  "type": "rejected_hypotheses",
  "hypotheses": [...],
  "hypotheses_path": "..."
}
```

For each rejected hypothesis, use AskUserQuestion:

```
questions:
  - question: "{id} was REJECTED: {statement}. Evidence: {evidence_summary}. Do you have domain knowledge that confirms this is actually valid?"
    header: "{id}"
    options:
      - label: "Accept rejection"
        description: "The hypothesis is indeed invalid - design will adapt"
      - label: "Override - I confirm it's valid"
        description: "I have domain knowledge confirming this assumption"
    multiSelect: false
```

**If user selects "Override"**:

1. Use Edit tool to update hypotheses.md:
   - Change status from `REJECTED` to `CONFIRMED_BY_USER`
   - Append to the hypothesis findings section:
     ```markdown
     **User Override**: User confirmed hypothesis validity based on domain knowledge.
     ```

**If user selects "Accept rejection"**:

No changes needed - status remains REJECTED.

### Step 3: Report Result

Display the validation summary to the user. If any hypotheses were overridden, note them in the output.
