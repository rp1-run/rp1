@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: "JetBrains Mono";
  src: url("/fonts/JetBrainsMono/JetBrainsMono-Regular.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "JetBrains Mono";
  src: url("/fonts/JetBrainsMono/JetBrainsMono-Medium.woff2") format("woff2");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "JetBrains Mono";
  src: url("/fonts/JetBrainsMono/JetBrainsMono-Bold.woff2") format("woff2");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 240 5.9% 10%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 5.9% 10%;
    --radius: 0.5rem;

    /* Terminal aesthetic - Catppuccin Latte */
    --terminal-green: 115 54% 40%;  /* #40a02b */
    --terminal-cursor: 115 54% 40%;
    --terminal-mauve: 266 85% 58%;  /* #8839ef */
    --terminal-red: 347 87% 44%;    /* #d20f39 */
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;

    /* Terminal aesthetic - Catppuccin Mocha */
    --terminal-green: 115 54% 76%;  /* #a6e3a1 */
    --terminal-cursor: 115 54% 76%;
    --terminal-mauve: 267 84% 81%;  /* #cba6f7 */
    --terminal-red: 343 81% 75%;    /* #f38ba8 */
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-mono;
  }
}

@layer components {
  .markdown-content {
    @apply max-w-none;
  }

  .markdown-content > *:first-child {
    @apply mt-0;
  }

  .markdown-content > *:last-child {
    @apply mb-0;
  }

  /* Responsive table styling (T1) */
  .markdown-content table {
    @apply min-w-full;
  }

  .markdown-content .table-wrapper {
    @apply max-w-full overflow-x-auto;
  }

  /* Task list container styling (T3) */
  .markdown-content ul.contains-task-list {
    @apply list-none ml-0 pl-0;
  }

  /* Task list items - use padding + absolute positioning for checkbox */
  .markdown-content li.task-list-item {
    @apply list-none ml-0;
    position: relative;
    padding-left: 1.5rem;
  }

  /* Task checkboxes - position absolutely at the start */
  .markdown-content li.task-list-item > input[type="checkbox"] {
    @apply h-4 w-4 rounded border-border;
    position: absolute;
    left: 0;
    top: 0.375rem;
    accent-color: hsl(var(--terminal-green));
  }

  /* Checked state distinction */
  .markdown-content li.task-list-item > input[type="checkbox"]:checked {
    @apply opacity-80;
  }

  /* Nested tables in lists (T5) */
  .markdown-content li > .table-wrapper,
  .markdown-content li > table {
    @apply my-2;
  }

  /* Nested lists maintain proper spacing (T5) */
  .markdown-content li > ul,
  .markdown-content li > ol {
    @apply mt-2 mb-0;
  }

  /* Heading styles (T2) */
  .markdown-content h1 {
    @apply scroll-m-20 text-3xl font-bold tracking-tight mb-4 mt-6;
  }

  .markdown-content h1:first-child {
    @apply mt-0;
  }

  .markdown-content h2 {
    @apply scroll-m-20 text-2xl font-semibold tracking-tight mt-8 mb-4 border-b pb-2;
  }

  .markdown-content h3 {
    @apply scroll-m-20 text-xl font-semibold tracking-tight mt-6 mb-3;
  }

  .markdown-content h4 {
    @apply scroll-m-20 text-lg font-semibold tracking-tight mt-4 mb-2;
  }

  .markdown-content h5 {
    @apply scroll-m-20 text-base font-semibold tracking-tight mt-4 mb-2;
  }

  .markdown-content h6 {
    @apply scroll-m-20 text-sm font-semibold tracking-tight mt-4 mb-2 text-muted-foreground;
  }

  /* Text element styles (T2) */
  .markdown-content p {
    @apply leading-7;
  }

  .markdown-content p:not(:first-child) {
    @apply mt-4;
  }

  .markdown-content strong {
    @apply font-bold;
  }

  .markdown-content em {
    @apply italic;
  }

  .markdown-content del {
    @apply line-through text-muted-foreground;
  }

  /* List styles (T2) */
  .markdown-content ul {
    @apply my-4 ml-6 list-disc;
  }

  .markdown-content ol {
    @apply my-4 ml-6 list-decimal;
  }

  .markdown-content li {
    @apply mt-2;
  }

  /* Blockquote and hr styles (T2) */
  .markdown-content blockquote {
    @apply mt-4 border-l-4 border-terminal-green pl-4 italic text-muted-foreground;
  }

  .markdown-content hr {
    @apply my-6 border-border;
  }

  /* Image styles (T2) */
  .markdown-content img {
    @apply my-4 max-w-full rounded-md;
  }

  /* Table cell styles (T2) */
  .markdown-content thead {
    @apply border-b bg-muted/50;
  }

  .markdown-content tbody tr:nth-child(even) {
    @apply bg-muted/30;
  }

  .markdown-content tr {
    @apply border-b border-border;
  }

  .markdown-content th {
    @apply px-3 py-2 text-left font-semibold;
  }

  .markdown-content td {
    @apply px-3 py-2;
  }

  /* Shiki code block styling */
  .shiki-container pre {
    margin: 0;
    padding: 0;
    background: transparent;
    font-size: 0.875rem;
    line-height: 1.5rem;
  }

  .shiki-container pre code {
    display: flex;
    flex-direction: column;
    font-family: "JetBrains Mono", monospace;
  }

  .shiki-container .line {
    height: 1.5rem;
    line-height: 1.5rem;
  }

  /* Ensure empty lines have content for proper height */
  .shiki-container .line:empty::after {
    content: "\200b"; /* zero-width space */
  }

  /* Shiki dual theme support - variables are defined inline on each span */
  .shiki,
  .shiki span {
    color: var(--shiki-light);
    background-color: transparent;
  }

  html.dark .shiki,
  html.dark .shiki span {
    color: var(--shiki-dark);
  }

  .mermaid-svg svg {
    max-width: none;
  }
}

@layer utilities {
  .text-terminal-green {
    color: hsl(var(--terminal-green));
  }

  .border-terminal-green {
    border-color: hsl(var(--terminal-green));
  }

  .bg-terminal-green {
    background-color: hsl(var(--terminal-green));
  }

  .text-terminal-mauve {
    color: hsl(var(--terminal-mauve));
  }

  .text-terminal-red {
    color: hsl(var(--terminal-red));
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .animate-blink {
    animation: blink 1s ease-in-out infinite;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}
